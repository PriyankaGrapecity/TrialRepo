<!doctype html>
<html style="height:100%">
<head>
    <link rel="stylesheet" href="http://xa-tools-hornet/css/site.css" type="text/css">
    <link rel="stylesheet" href="http://xa-tools-hornet/css/spreadgrid.css" type="text/css">
    <script src="http://xa-tools-hornet/grunt-scripts/lodash.min.js"></script>
    <script src="http://xa-tools-hornet/grunt-scripts/jquery.min.js"></script>
    <script src="http://xa-tools-hornet/grunt-scripts/spreadgrid.js"></script>
    <script src="http://xa-tools-hornet/grunt-scripts/globalize.js"></script>
    <script src="http://xa-tools-hornet/grunt-scripts/formatter.js"></script>
    <script src="http://xa-tools-hornet/grunt-scripts/functions.js"></script>

    <style>
        #grid1 {
            height: 90%;
        }

        #code-editor {
            width: 800px;
            background-color: black;
            color: white;
            font-family: monospace, Lucida Grande, Lucida Sans, Arial, sans-serif;
        }

        .run-code-button {
            border: 1px solid lightgrey;
            height: 25px;
            width: 70px;
            border-radius: 5px;
            background-color: #fff;
            outline: 0;
            vertical-align: top;
        }

        .setting-container {
            margin-bottom: 10px;
            border-bottom: 1px solid lightgrey;
        }
    </style>
</head>
<body style="height:95%;">

    <div class="setting-container">
        <textarea spellcheck="false" id="code-editor">gcGrid.data.filter('[salesMan]="Lucy"').do();</textarea>
        <button class="run-code-button" id="submit_code">Run</button>
    </div>
    <div id="grid1"></div>


    <script>
        var gcGrid;
        var columns = [
            { id: 'salesMan', caption: 'salesMan', dataField: 'salesMan' },
            { id: 'productName', caption: 'Product Name', dataField: 'productName' },
            { id: "unitPrice", caption: "Unit Price", dataField: "unitPrice", format: '$#,##0' },
            { id: "quantity", caption: "Quantity", dataField: "quantity" },
            { id: 'salesDate', caption: 'salesDate', dataField: 'salesDate', format: 'yyyy/MM/dd' }
        ];

        $(document).ready(function () {
            $.getJSON("data/salesData_small.json", function (data) {
                gcGrid = new GcSpread.Views.GcGrid(document.getElementById('grid1'), data, columns);
                gcGrid.data.filter('[salesMan]="Lucy"').do();

                $('#submit_code').click(function () {
                    eval('gcGrid.data.filter().clear(); try{' + $('#code-editor').val() + '}catch(er){alert(er);};');
                })
            })
        });
    </script>


</body>
</html>
